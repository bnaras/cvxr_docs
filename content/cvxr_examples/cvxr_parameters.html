---
title: "Dealing with Solver-Specific Parameters"
author: Anqi Fu, David Kang and Balasubramanian Narasimhan
date: "2020-01-15"
params:
  mode: ignore
  testdata_dir: test_data
  data_dir: whats_new
---



<div id="overview" class="section level1">
<h1>Overview</h1>
<p><code>CVXR</code> 1.0 has now updated how it handles its solver-specific parameters and has diverged slightly from how <code>cvxpy</code> handles it. It now features five standard parameters that are the default parameters for each solve function. Here are the five parameters</p>
<ul>
<li><p><code>verbose</code> : A parameter that deals with the verbosity of the solver. It is a boolean variable for all solvers, but it can also take integer values for the <code>MOSEK</code> solver, whose interface deals with an integer verbosity parameter with the default of 10. The default value of <code>verbose</code> for <code>CVXR</code> is set to <code>FALSE</code>.</p></li>
<li><p><code>reltol</code> : Deals with the relative tolerance of the solver. Its default value is set at <code>1e-8</code></p></li>
<li><p><code>feastol</code> : Deals with feasible tolerance of the solver. Its default value is set at <code>1e-8</code></p></li>
<li><p><code>abstol</code> : Deals with the absolute tolerance of the solver. Its default value is set at <code>1e-8</code></p></li>
<li><p><code>num_iter</code> : A parameter that specifies the maximum number of iterations for the solver. Its default value is set at <code>1e6</code>.</p></li>
</ul>
<p>The users can also pass in solver-specific parameters to the <code>solve</code> function based on what solver they specify. On the whole, the additional parameters given by the user will override the five values specified above.</p>
</div>
<div id="solver-specific-parameters" class="section level1">
<h1>Solver-Specific Parameters</h1>
<p>We will go over some examples for each solvers supported by <code>CVXR</code>, the available parameters for each solver, and where to find the documentation for each solver.</p>
<div id="osqp" class="section level2">
<h2>OSQP</h2>
<p>The parameters available for <code>OSQP</code> can be found in this <a href="https://osqp.org/docs/interfaces/solver_settings.html">link</a>. The parameters can be entered individually in the arguments of the solve function or can be passed through as a list. If the user enters in a parameter that is not specified or accepted by <code>OSQP</code>, then the solver will ignore the parameter and proceed to solve the problem. Here is an example</p>
<pre><code>x &lt;- Variable(1)
obj &lt;- Minimize(x)
prob &lt;- Problem(obj, list(x &gt;= 0))

# Inside Function
solve(prob, solver = &quot;OSQP&quot;, verbose = FALSE, feastol = 1e-2, eps_prim_inf = 1e-5)

# Can also do it by passing in a list
params &lt;- list()
params$verbose = TRUE
params$feastol = 1e-2
params$eps_prim_inf = 1e-5
params$eps_prim_inf = 1e-3

solve(prob, solver = &quot;MOSEK&quot;, verbose = FALSE, ... =  params)</code></pre>
<p>Notice how in the second case that the verbose in the <code>params</code> list overrides that of the verbose listed in the function.</p>
</div>
<div id="scs" class="section level2">
<h2>SCS</h2>
<p>The parameters available for <code>SCS</code> can be found in this <a href="https://cran.r-project.org/web/packages/scs/scs.pdf">link</a> under the <code>scs_control</code> function. Much like <code>OSQP</code>, the parameters can be entered individually in the arguments of the solve function or can be passed through as a list. If the user enters in a parameter that is not specified or accepted by <code>SCS</code>, then the solver will ignore the parameter and proceed to solve the problem. Here is an example:</p>
<pre><code>n&lt;-3
p&lt;-3
C &lt;- matrix(rnorm(n^2), ncol = n)
A &lt;- list(matrix(rnorm(n*n), nrow = n, ncol = n), matrix(rnorm(n*n), nrow = n, ncol = n), matrix(rnorm(n*n), nrow = n, ncol = n))
b &lt;- matrix(rnorm(p), nrow = p)

X &lt;- Variable(c(n, n), symmetric = TRUE)
constraints &lt;- list(X &gt;= 0)
for(i in 1:p){
  constraints &lt;- c(constraints, list(matrix_trace(A[[i]]%*%X) == b[i] ))
}

obj &lt;- Minimize(matrix_trace(C %*% X))
prob &lt;- Problem(obj, constraints)
solve(prob, solver = &quot;SCS&quot;, verbose = FALSE, feastol = 1e-2, cg_rate = 1.5, scale = 2)</code></pre>
<p>Notice how in this case a warning has been thrown: <code>A value has been set for feastol, but the SCS solver does not accept this parameter. Solver will run without taking this parameter into consideration.</code> In this case, the <code>SCS</code> solver does not suppor the feasible tolerance parameter, so the solver ignores it.</p>
</div>
<div id="ecos" class="section level2">
<h2>ECOS</h2>
<p>The parameters available for <code>ECOS</code> can be found in this <a href="https://cran.r-project.org/web/packages/ECOSolveR/ECOSolveR.pdf">link</a> under the <code>ecos.control</code> function. Much like <code>OSQP</code>, the parameters can be entered individually in the arguments of the solve function or can be passed through as a list. If the user enters in a parameter that is not specified or accepted by <code>ECOS</code>, then the solver will ignore the parameter and proceed to solve the problem. Here is an example:</p>
<pre><code>x &lt;- Variable(1)
obj &lt;- Minimize(x)
prob &lt;- Problem(obj, list(x &gt;= 0))
solve(prob, solver = &quot;ECOS&quot;, verbose = FALSE, feastol = 1e-2, reltol_inacc = 1e-5)</code></pre>
</div>
<div id="cplex" class="section level2">
<h2>CPLEX</h2>
<p>The parameters available for <code>CPLEX</code> can be found in this <a href="https://cran.r-project.org/web/packages/Rcplex/Rcplex.pdf">link</a> under the details section for the function <code>Rcplex</code> function on page 3. Much like <code>OSQP</code>, the parameters can be entered individually in the arguments of the solve function or can be passed through as a list. If the user enters in a parameter that is not specified or accepted by <code>CPLEX</code>, then the solver will give the user a warning but will proceed to solve the problem. Here is an example:</p>
<pre><code>x &lt;- Variable(1)
obj &lt;- Minimize(x)
prob &lt;- Problem(obj, list(x &gt;= 0))
solve(prob, solver = &quot;CPLEX&quot;, verbose = FALSE, eps_abs_tol = 1e-2, epagap = 1e-5)</code></pre>
<p>As you can see, <code>eps_abs_tol</code> is not one of <code>CPLEX</code>’s specified parameters, so the solver threw a warning.</p>
</div>
<div id="mosek" class="section level2">
<h2>MOSEK</h2>
<p>The parameters available for <code>MOSEK</code> can be seen in this <a href="https://docs.mosek.com/9.1/rmosek/parameters.html#doc-all-parameter-list">link</a>. As you can see, the number of parameters is quite massive. They are also split between three times of parameters in “Double,” “Integer,” and “String” parameters. To pass these into the solver, they must be put in a list beforehand. Moreover, there are also general solver parameters that do not belong in any of the three categories. These parameters can be found in detail in the <code>Rmosek</code> package documentation, but here are the parameters</p>
<ul>
<li>verbose (Another important note here is while the default values of <code>TRUE</code> and <code>FALSE</code> work, <code>MOSEK</code> uses integer values for verbose with the default being 10. The <code>TRUE</code> value for verbose corresponds to 10 in the solver)</li>
<li>usesol</li>
<li>useparam</li>
<li>soldetail</li>
<li>getinfo</li>
<li>writebefore</li>
<li>writeafter</li>
</ul>
<p>These parameters are passed into the <code>solve</code> function as normal. Here is an example:</p>
<pre><code>x &lt;- Variable(1)
obj &lt;- Minimize(x)
prob &lt;- Problem(obj, list(x &gt;= 0))
iparam &lt;- list()
iparam$AUTO_UPDATE_SOL_INFO &lt;- &quot;OFF&quot;
iparam$BI_IGNORE_NUM_ERROR &lt;- &quot;OFF&quot;
iparam$BI_MAX_ITERATIONS &lt;- 100000

dparam &lt;- list()
dparam$BASIS_REL_TOL_S &lt;- 1.0e-12
dparam$BASIS_TOL_S &lt;- 1.0e-6

solve(prob, solver = &quot;MOSEK&quot;, verbose = FALSE, soldetail = 3, dparam = dparam, iparam = iparam)</code></pre>
<p>A quick detail in this case is that the solver threw a warning about the <code>soldetail</code> parameter. Both the <code>soldetail</code> and <code>getinfo</code> parameter controls the amount of data the solve returns, and some of them might be needed in order to inver the solution. Thus, please proceed with caution when using these variables as they can cause the solver to not get the answer.</p>
</div>
<div id="gurobi" class="section level2">
<h2>GUROBI</h2>
<p>The parameters available for <code>GUROBI</code> can be seen in this <a href="https://www.gurobi.com/documentation/6.5/refman/parameters.html#sec:Parameters">link</a>. If an unaccepted parameter is passed into the <code>solve</code> function, then the function will not run to completion. The solver will also not let you know which parameter is at fault unless the parameter is continuous. Here is an example</p>
<pre><code>x &lt;- Variable(1)
obj &lt;- Minimize(x)
prob &lt;- Problem(obj, list(x &gt;= 0))
solve(prob, solver = &quot;GUROBI&quot;, verbose = FALSE, BarIterLimit = 20, Quad = 1)</code></pre>
</div>
<div id="glpk" class="section level2">
<h2>GLPK</h2>
<p>The parameters available for <code>GLPK</code> can be seen in this <a href="https://cran.r-project.org/web/packages/Rglpk/Rglpk.pdf">link</a> under the <code>Details</code> section in page 4. There are only four parameters in <code>verbose</code>, <code>presolve</code>, <code>tm_limit</code>, <code>canonicalize_status</code>. Here is an example</p>
<pre><code>x &lt;- Variable(1)
obj &lt;- Minimize(x)
prob &lt;- Problem(obj, list(x &gt;= 0))
solve(prob, solver = &quot;GLPK&quot;, verbose = FALSE, presolve = FALSE, tm_limit = 10, canonicalize_status = TRUE)</code></pre>
</div>
<div id="cbc" class="section level2">
<h2>CBC</h2>
<p>The parameters available for <code>CBC</code> can be seen in this <a href="https://projects.coin-or.org/CoinBinary/export/1059/OptimizationSuite/trunk/Installer/files/doc/cbcCommandLine.pdf">link</a>. Much like most of the solvers outlined above, if the user passes in a unspecified parameter into the solver, then the solver just ignores the parameter and proceeds to solve the problem. Here is an example</p>
<pre><code>x &lt;- Variable(1)
obj &lt;- Minimize(x)
prob &lt;- Problem(obj, list(x &gt;= 0))
solve(prob, solver = &quot;CBC&quot;, verbose = FALSE, sec = 5, maxn = 10)</code></pre>
</div>
</div>
